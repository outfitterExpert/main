<!DOCTYPE html>
<!--<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:c="http://www.w3.org/1999/html">-->
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>User Profile</title>
</head>
<body>
<header th:replace="partials/styles :: styles"></header>
<nav th:replace="partials/navbar :: navbar"/>
<script th:replace="partials/scripts :: scripts"></script>
<br>
<div class="container" >
    <div class="row">
        <div class="col-4" style="padding-left: 15px">
            <br>
            <h2>Profile</h2>
            <br>
            <!--            <div class="row" style="padding-left: 15px">-->
                <img class="user-img" src="../../static/img/user_profile_img.jpg" th:src="${user.img_user}"/>
                <br>
                <label>Username:</label><h2 th:text="${user.username}"></h2>
                <label>Name:</label>
                <div class="row">
                <h3>&nbsp;&nbsp;</h3>
                <h3 th:text="${user.firstName}"></h3>
                <h3>&nbsp;</h3>
                <h3 th:text="${user.lastName}"></h3>
                </div>
<!--            <h3 th:text="${user.lastName}"></h3>-->
            <!--    how do you do the if else in html with thyme leaf-->
                <label>Outfitter:</label><h3 th:text="${user.outfitter}"></h3>
                <label>User Location:</label><h3 th:text="${user.user_location}"></h3>
<!--                <h3 th:text="${user.user_location}"></h3>-->
                <label>Bio:</label><h3 th:text="${user.bio}"></h3>
                <br>

                <div th:if="${isUserAccount}">

                    <form th:action="@{/profile/{id}/edit(id = ${user.id})}" method="GET">
                        <button class="custom-button-edit profile-b" type="submit">Edit Profile</button>
                    </form>

                        <button class="custom-button-del profile-b btn-delete">Delete Profile</button>

                </div>


                        <br>
                        <h2>Reviews:</h2>
                        <br>

                        <div th:each="review : ${reviews}">
                            <h3  th:text="${review.title}"></h3>
                            <p th:text="${review.rating}"></p>
                            <p th:text="${review.body}"></p>



                            <div th:if="${isUserAccount}">

                                <form th:action="@{/reviews/{id}/edit(id = ${review.id})}" method="GET">
                                    <button class="custom-button-edit profile-b" type="submit">Edit Review</button>
                                </form>

                                <form th:action="@{/reviews/{id}/delete(id = ${review.id})}" method="post">
                                    <button class="custom-button-del profile-b">Delete Review</button>
                                </form>

                                <!-- review delete test. if doesn't work uncommment.-->
<!--                                <button class="btn-delete">Delete Review</button>-->

<!--                                <form th:action="@{/reviews/{id}/edit(id = ${review.id})}" method="GET">-->
<!--                                    <button class="custom-button profile-b" type="submit">Edit Review</button>-->
<!--                                </form>-->
<!--                                <br>-->
                            </div>
                        </div>
            </div>


        <div class="col-8">
        <br>
        <h2>Listings:</h2>
        <div th:each="listing : ${listings}">
            <form th:action="@{/listings/{id}(id = ${listing.id})}" method="GET" >
                <button type="submit" class="benjamin-button">
            <img class="img-listing" th:src="${listing.imgUrl}"/>
                </button>
            </form>
            <h3 th:text="${listing.location}"></h3>
            <h3 th:text="${listing.title}"></h3>
            <div th:if="${isUserAccount}">
                <div th:if="${isUserAccount}">
                    <form th:action="@{/listings/{id}/package/create (id = ${listing.id})}" method="GET">
                        <button class="custom-button profile-b">Create a Package</button>
                    </form>
                </div>
                <form th:action="@{/listings/{id}/edit(id = ${listing.id})}" method="GET">
                    <button class="custom-button-edit profile-b" type="submit">Edit Listing</button>
                </form>
                <form th:action="@{/listings/{id}/delete(id = ${listing.id})}" method="post">
                    <button class="custom-button-del profile-b">Delete Listing</button>
                </form>
<!--                <form th:action="@{/listings/{id}/edit(id = ${listing.id})}" method="GET">-->
<!--                    <button class="custom-button profile-b" type="submit">Edit Listing</button>-->
<!--                </form>-->
                <br>
            </div>
            </div>
        </div>
        <hr>


        <!--                    TESTING MODAL HERE-->
        <!-- Delete Profile Modal -->
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title pull-right" id="myModalLabel">Warning</h3>
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>


                    </div>
                    <div class="modal-body">

                        <p class="alert alert-danger pull-right" type="submit">Are you sure you want to delete?</p>


                    </div>

                    <div class="modal-footer">
                        <form th:action="@{/profile/{id}/delete(id = ${user.id})}" method="post">
                            <button type="submit" class="btn-danger" id="btnDelteYes">Yes I'm sure.</button>
                        </form>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    </div>

                <!--test deleting review button-->
<!--                    <div class="modal-footer">-->
<!--                        <form th:action="@{/reviews/{id}/delete(id = ${review.id})}" method="post">-->
<!--                            <button type="submit" class="btn-danger" id="btnDelteYes-review">Yes I'm sure.</button>-->
<!--                        </form>-->
<!--                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>-->
<!--                    </div>-->



                </div>
            </div>
        </div>


    </div>
        </div>

        <script th:replace="partials/scripts :: scripts"></script>

</body>
</html>